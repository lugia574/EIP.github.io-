# B. SQL 응용

## 프로시저

    절차형 SQL을 활용하여 특정 기능을 수행하는 일종의 트랜잭션 언어

![프로시저](/img/7_sql/%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80.png)

### 문제

    DBMS에서 시스템의 주간 마감, 일일 마감 작업 등
    주로 일괄 작업에 사용되며, 데이터베이스에 저장되어 수행된다.
    DECLARE, CONTROL, SQL, EXCEPTION 등의 구성 요소로
    이루어져 있고, EXECUTE 또는 CALL 명령어로 실행되는
    절차형 SQL은 무엇인지 쓰시오.

> 프로시저

## 트리거

    데이터베이스 시스템에서 데이터의 이벤트(입력, 갱신, 삭제 등)
    가 발생 할때마다 관련 작업이 자동으로 수행되는 절차형 SQL

    트리거의 구문에는 DCL 사용 불가

![트리거](/img/7_sql/%ED%8A%B8%EB%A6%AC%EA%B1%B0.png)

트리거 구성도에 EXCEPTION 빠짐

### 문제

    DBMS에 저장되어 수행되는 절차형 SQL 중
    트리거(Trigger)의 개념을 간략히 서술하시오.

> db에서 이벤트가 발생할 때마다 관련 작업
> 이 자동으로 수행되는 절차형 SQL이다.

## 사용자 정의 함수

    데이터베이스에 저장되어 SELECT, INSERT, DELETE, UPDATE
    등 DML 문의 호출에 의해 실행됨

    INSERT, DELETE, UPDATE를 통한 테이블 조작 불가
    SELECT를 통한 조회 가능

![사용자정의함수](/img/7_sql/%EC%82%AC%EC%9A%A9%EC%9E%90%EC%A0%95%EC%9D%98%ED%95%A8%EC%88%98.png)

### 문제

    다음 설명에 가장 부합하는 절차형 SQL의 종류를 쓰시오.

```
- 일련의 작업을 연속적을 처리하며, 종료 시 처리 결과를 단일값으로 반환한다.

- 데이터베이스에 저장되어 DML 문의 호출에 의해 실행된다.

- RETURN 을 통해 값을 변호나하기 때문에 출력 파라미터가 존재하지 않는다.
```

> 사용자 정의 함수

## 제어문

    프로그램의 진행 순서를 변경하기 위해 사용하는 명령문

    종류 : IF, LOOP, GOTO 등

![제어문](/img/7_sql/%EC%A0%9C%EC%96%B4%EB%AC%B8.png)

![루프](/img/7_sql/%EB%A3%A8%ED%94%84.png)

## 커서 (Cursor)

    쿼리문의 처리 결과가 저장되어 있는 메모리 공간을 가리키는 포인터

    수행: 열기, 패치, 닫기의 3단계

- 묵시적 커서

  자동으로 생성되어 수행, 수행된 쿼리문의 정상적인 수행 여부를
  확인하기 위해 사용

- 명시적 커서

  사용자가 직접 정의해서 사용
